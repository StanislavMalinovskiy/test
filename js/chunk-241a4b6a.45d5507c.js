(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-241a4b6a"],{a55b:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{staticClass:"login fill-height",attrs:{fluid:""}},[r("v-row",{staticClass:"pb-12",attrs:{align:"center",justify:"center"}},[r("v-col",{attrs:{"align-self":"center",cols:"12",md:"12"}},[t.isLogin?r("h1",{attrs:{align:"center"}},[t._v(" Войти ")]):r("h1",{attrs:{align:"center"}},[t._v(" Зарегистрироваться ")])]),r("v-col",{attrs:{"align-self":"center",cols:"12",sm:"7",md:"4",lg:"3"}},[r("v-card",{},[r("v-card-text",{staticClass:"pt-lg-5 cyan lighten-5",attrs:{align:"center",dark:""}},[r("v-row",{attrs:{align:"center",justify:"center"}},[r("v-col",{attrs:{cols:"12",md:"10"}},[r("v-label",[t._v(" Зарегистрированные пользователи могут добавлять и просматривать детали событий. ")])],1),r("v-col",{attrs:{cols:"12",md:"10"}},[r("v-label",[t._v(" Регистрация в системе производиться через мессенджер Telegram. ")])],1),r("v-col",{attrs:{cols:"12",md:"10"}},[r("v-label",[t._v(" Пожалуйста, установите флажок при регистрации. ")])],1)],1)],1),r("v-card-text",{attrs:{align:"center"}},[r("div",{ref:"loginPanel",staticStyle:{height:"40px"}})]),r("v-card-actions",{staticClass:"pt-0"},[r("v-spacer"),r("h4",[t._v(" Если увас нет! ")]),r("img",{attrs:{src:a("be22"),width:"120px",height:"auto"}}),r("v-spacer")],1)],1)],1)],1)],1)},s=[],n=(a("96cf"),a("1da1")),i=a("b444"),c=a("7e4e"),o=a("c9d9"),l={name:"Login",data:function(){return{isLogin:!1}},mounted:function(){i["a"][this.$route.query.message]&&this.$message(i["a"][this.$route.query.message]),this.createTelegramAuthScript(),this.loadData(),this.isLogin=!1},methods:{loadData:function(){},createTelegramAuthScript:function(){var t=document.createElement("script");t.async=!0,t.src="https://telegram.org/js/telegram-widget.js?8",t.setAttribute("data-size","large"),t.setAttribute("data-telegram-login",o["a"].BOT_NAME),t.setAttribute("data-onauth","onTelegramAuth(user)"),t.setAttribute("data-request-access","write"),this.$refs.loginPanel.appendChild(t),window.onTelegramAuth=this.onTelegramAuth},onTelegramAuth:function(t){var e=c["a"](t);e?c["b"](t.auth_date)?this.$store.dispatch("LOGOUT"):(this.saveExtUser(t),this.getUserFromDb(t)):this.$store.dispatch("LOGOUT")},saveExtUser:function(t){var e=this;this.$store.dispatch("SET_EXT_USER",t).then((function(){e.$router.push("/?message=auth_success")}))},getUserFromDb:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$store.dispatch("GET_USER_BY_ID_AND_UPDATE",t).then((function(a){a.data.result||e.createDbUser(t)}),(function(t){console.log("GET_USER_BY_ID_AND_UPDATE -- ERROR : "+t),console.error("Got nothing from server. Prompt user to check internet connection and try again")}));case 2:case"end":return a.stop()}}),a)})))()},createDbUser:function(t){console.log("CREATE_DB_USER started: "),this.$store.dispatch("CREATE_DB_USER",t)}}},u=l,h=a("2877"),g=Object(h["a"])(u,r,s,!1,null,null,null);e["default"]=g.exports},be22:function(t,e,a){t.exports=a.p+"img/google-play-badge.14df6f33.png"}}]);
//# sourceMappingURL=chunk-241a4b6a.45d5507c.js.map