(function(e){function t(t){for(var r,o,u=t[0],s=t[1],l=t[2],c=0,d=[];c<u.length;c++)o=u[c],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);f&&f(t);while(d.length)d.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,o=1;o<n.length;o++){var u=n[o];0!==a[u]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},o={app:0},a={app:0},i=[];function u(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-15ebddef":"8300c0ad","chunk-1ff5945a":"0acea079","chunk-2d217357":"19dd67a2","chunk-2dceee30":"764ca96d","chunk-410b8a03":"763a5e36","chunk-770e685e":"b771b778"}[e]+".js"}function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"chunk-15ebddef":1,"chunk-2dceee30":1,"chunk-410b8a03":1,"chunk-770e685e":1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-15ebddef":"85e964b6","chunk-1ff5945a":"31d6cfe0","chunk-2d217357":"31d6cfe0","chunk-2dceee30":"0e52f48a","chunk-410b8a03":"85e964b6","chunk-770e685e":"4f626df0"}[e]+".css",a=s.p+r,i=document.getElementsByTagName("link"),u=0;u<i.length;u++){var l=i[u],c=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(c===r||c===a))return t()}var d=document.getElementsByTagName("style");for(u=0;u<d.length;u++){l=d[u],c=l.getAttribute("data-href");if(c===r||c===a)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var r=t&&t.target&&t.target.src||a,i=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=r,delete o[e],f.parentNode.removeChild(f),n(i)},f.href=a;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){o[e]=0})));var r=a[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise((function(t,n){r=a[e]=[t,n]}));t.push(r[2]=i);var l,c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=u(e);var d=new Error;l=function(t){c.onerror=c.onload=null,clearTimeout(f);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",d.name="ChunkLoadError",d.type=r,d.request=o,n[1](d)}a[e]=void 0}};var f=setTimeout((function(){l({type:"timeout",target:c})}),12e4);c.onerror=c.onload=l,document.head.appendChild(c)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var f=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("4de4"),n("45fc"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),o=n("1dce"),a=n.n(o),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n(e.layoutBase,{tag:"component"},[n("router-view")],1)],1)},u=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-content",{staticClass:"app-content",class:{full:!e.drawer}},[n("router-view")],1)},l=[],c=n("b444"),d={computed:{error:function(){return this.$store.getters.error}},watch:{error:function(e){console.log(),console.log(e),this.$error(c["a"][e.code]||"Something went wrong")}}},f=d,p=n("2877"),m=n("6544"),h=n.n(m),g=n("a75b"),v=Object(p["a"])(f,s,l,!1,null,null,null),b=v.exports;h()(v,{VContent:g["a"]});var y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-navigation-drawer",{attrs:{width:"18%",clipped:e.$vuetify.breakpoint.lgAndUp,app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[n("left-panel")],1),n("v-app-bar",{attrs:{dark:"","clipped-left":e.$vuetify.breakpoint.lgAndUp,app:"",color:"cyan darken-4",dense:""}},[n("v-app-bar-nav-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),n("v-toolbar-title",{staticClass:"ml-0 pl-4",staticStyle:{width:"300px"}},[n("span",{staticClass:"hidden-sm-and-down"},[e._v("SmartGeo")])]),n("v-text-field",{staticClass:"hidden-sm-and-down",attrs:{dark:"",flat:"","solo-inverted":"","hide-details":"",dense:"","prepend-inner-icon":"mdi-magnify",label:"Search"}}),n("v-spacer"),n("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-btn",e._g({attrs:{dark:"",icon:""}},r),[n("v-avatar",{attrs:{width:"40px",height:"40px"}},["undefined"===e.userPhotoUrl||null===e.userPhotoUrl?n("img",{staticClass:"avatar",attrs:{src:"https://www.w3schools.com/howto/img_avatar.png",alt:"Avatar"}}):n("img",{staticClass:"avatar",attrs:{src:e.userPhotoUrl,alt:"Avatar"}})])],1)]}}])},[n("v-list",[n("v-list-item",[n("v-list-item-avatar",["undefined"===e.userPhotoUrl||null===e.userPhotoUrl?n("img",{staticClass:"avatar",attrs:{src:"https://www.w3schools.com/howto/img_avatar.png",alt:"Avatar"}}):n("img",{staticClass:"avatar",attrs:{src:e.userPhotoUrl,alt:"Avatar"}})]),n("v-list-item-content",[n("v-list-item-title",[e._v(e._s(e.userFullName))])],1)],1)],1),n("v-divider"),n("v-list",e._l(e.header_menu,(function(t,r){return n("v-list-item",{key:r,on:{click:function(n){return e.goto(t.link)}}},[n("v-list-item-icon",[n("v-icon",{domProps:{textContent:e._s(t.icon)}})],1),n("v-list-item-title",{domProps:{textContent:e._s(t.name)}})],1)})),1)],1)],1),n("v-content",{staticClass:"app-content",class:{full:!e.drawer}},[n("div",{staticClass:"app-page"},[n("router-view")],1)])],1)},w=[],k=(n("96cf"),n("1da1")),_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-list",{attrs:{dense:"",rounded:""}},[e._l(e.items,(function(t){return n("v-list-item",{key:t.text,attrs:{to:t.url,link:""}},[n("v-list-item-action",[n("v-icon",[e._v(e._s(t.icon))])],1),n("v-list-item-content",[n("v-list-item-title",[e._v(" "+e._s(t.title)+" ")])],1)],1)}))],2)},E=[],V={props:{isDrawer:Boolean},name:"LeftPanel",data:function(){return{items:[{title:"Login",url:"/login",exact:!0},{title:"Home",url:"/",exact:!0},{title:"Map",url:"/map",exact:!0},{title:"About",url:"/about",exact:!0}]}}},S=V,T=n("132d"),A=n("8860"),I=n("da13"),P=n("1800"),x=n("5d23"),O=Object(p["a"])(S,_,E,!1,null,"1a426236",null),C=O.exports;h()(O,{VIcon:T["a"],VList:A["a"],VListItem:I["a"],VListItemAction:P["a"],VListItemContent:x["a"],VListItemTitle:x["b"]});var $={name:"main-layout",data:function(){return{drawer:!0,offset:!0,date:new Date,interval:null,dropdown:null,header_menu:[{name:"Профиль",link:"/profile",icon:"account_circle"},{name:"Выйти",link:"/logout",icon:"assignment_return"}],userFullName:localStorage.getItem("userFullName"),userPhotoUrl:localStorage.getItem("userPhotoUrl")}},methods:{logout:function(){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$store.dispatch("REMOVE_TOKEN").then((function(){e.$router.push("/login?message=logout")}));case 1:case"end":return t.stop()}}),t)})))()},goto:function(e){"/logout"!==e?this.$router.push(e):this.logout()}},mounted:function(){var e=this;this.interval=setInterval((function(){e.date=new Date}),1e3);try{this.dropdown=M.Dropdown.init(this.$refs.dropdown,{constrainWidth:!1})}catch(t){}},beforeDestroy:function(){clearInterval(this.interval),this.dropdown&&this.dropdown.destroy&&this.dropdown.destroy()},components:{LeftPanel:C},computed:{error:function(){return this.$store.getters.error}},watch:{error:function(e){console.log(e),this.$error(c["a"][e.code]||"Something went wrong"),this.$error(e)}}},L=$,N=n("40dc"),j=n("5bc1"),U=n("8212"),q=n("8336"),B=n("ce7e"),D=n("8270"),R=n("34c3"),F=n("e449"),K=n("f774"),z=n("2fa4"),H=n("8654"),J=n("2a7f"),W=Object(p["a"])(L,y,w,!1,null,null,null),G=W.exports;h()(W,{VAppBar:N["a"],VAppBarNavIcon:j["a"],VAvatar:U["a"],VBtn:q["a"],VContent:g["a"],VDivider:B["a"],VIcon:T["a"],VList:A["a"],VListItem:I["a"],VListItemAvatar:D["a"],VListItemContent:x["a"],VListItemIcon:R["a"],VListItemTitle:x["b"],VMenu:F["a"],VNavigationDrawer:K["a"],VSpacer:z["a"],VTextField:H["a"],VToolbarTitle:J["a"]});var Y={name:"App",data:function(){return{}},computed:{layoutBase:function(){return(this.$route.meta.layout||"empty")+"-layout"}},components:{EmptyLayout:b,MainLayout:G}},Q=Y,X=n("7496"),Z=Object(p["a"])(Q,i,u,!1,null,null,null),ee=Z.exports;h()(Z,{VApp:X["a"]});n("d3b7");var te=[{path:"/login",name:"login",meta:{layout:"empty",requiresAuth:!1,requiresVisitor:!0},component:function(){return n.e("chunk-15ebddef").then(n.bind(null,"a55b"))}},{path:"/register",name:"register",meta:{layout:"empty",requiresAuth:!1,requiresVisitor:!0},component:function(){return n.e("chunk-1ff5945a").then(n.bind(null,"73cf"))}},{path:"/",name:"home",meta:{layout:"main",requiresAuth:!0},component:function(){return n.e("chunk-2dceee30").then(n.bind(null,"bb51"))}},{path:"/map",name:"Map",meta:{layout:"main",requiresAuth:!0},component:function(){return n.e("chunk-770e685e").then(n.bind(null,"4bb4"))}},{path:"/about",name:"about",meta:{layout:"main",requiresAuth:!1,requiresVisitor:!0},component:function(){return n.e("chunk-410b8a03").then(n.bind(null,"f820"))}},{path:"/profile",name:"profile",meta:{layout:"main",requiresAuth:!0},component:function(){return n.e("chunk-2d217357").then(n.bind(null,"c66d"))}}],ne=te,re=n("2f62"),oe=n("bc3a"),ae=n.n(oe),ie={state:{token:localStorage.getItem("access_token")||null},getters:{loggedIn:function(e){return null!==e.token},getToken:function(e){return e.token}},actions:{REMOVE_TOKEN:function(e){return Object(k["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,console.log("REMOVE_TOKEN"),delete ae.a.defaults.headers.common["Authorization"],localStorage.removeItem("access_token"),localStorage.removeItem("userFullName"),localStorage.removeItem("userPhotoUrl"),e.commit("destroyToken"),t.next=14;break;case 9:throw t.prev=9,t.t0=t["catch"](0),console.log(t.t0),e.commit("setError",t.t0),t.t0;case 14:case"end":return t.stop()}}),t,null,[[0,9]])})))()},SET_TOKEN:function(e,t){try{console.log("SET_TOKEN"),localStorage.setItem("access_token",t.hash),localStorage.setItem("userFullName",t.first_name+" "+t.last_name),localStorage.setItem("userPhotoUrl",t.photo_url),e.commit("retrieveToken",t.hash),ae.a.defaults.headers.common["Authorization"]="Bearer "+e.state.token,ae.a.defaults.headers.post["Authorization"]="Bearer "+e.state.token}catch(n){throw console.log(n),e.commit("setError",n),n}}},mutations:{retrieveToken:function(e,t){e.token=t},destroyToken:function(e){e.token=null}}};r["default"].use(re["a"]);var ue=new re["a"].Store({state:{error:null},mutations:{setError:function(e,t){e.error=t},clearError:function(e){e.error=null}},getters:{error:function(e){return e.error}},actions:{},modules:{auth:ie}});n("caad"),n("2532");function se(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"date",n={};return t.includes("date")&&(n.day="2-digit",n.month="long",n.year="numeric"),t.includes("time")&&(n.hour="2-digit",n.minute="2-digit",n.secons="2-digit"),new Intl.DateTimeFormat("ru-RU",n).format(new Date(e))}var le={install:function(e,t){e.prototype.$message=function(e){this.$toast.success({html:e})},e.prototype.$error=function(e){this.$toast.error({html:"[Ошибка]: ".concat(e)})}}},ce=n("8c4f"),de=n("ebfd"),fe=n.n(de),pe=n("b079"),me=n.n(pe),he=(n("ce8c"),n("ce5b")),ge=n.n(he);n("bf40");r["default"].use(ge.a);var ve={},be=new ge.a(ve);ae.a.defaults.baseURL="//192.168.1.13:8779/",r["default"].use(a.a),r["default"].use(le),r["default"].use(fe.a),r["default"].use(me.a,{position:"top-right"}),r["default"].filter("date",se),r["default"].use(ce["a"]);var ye,we=new ce["a"]({routes:ne});we.beforeEach((function(e,t,n){e.matched.some((function(e){return e.meta.requiresAuth}))?ue.getters.loggedIn?n():(console.log("user NOT logged in"),n({name:"login"})):e.matched.some((function(e){return e.meta.requiresVisitor}))&&ue.getters.loggedIn?n({name:"home"}):n()})),ye||new r["default"]({router:we,store:ue,created:function(){r["default"].prototype.$featureTypeCircle="Circle",r["default"].prototype.$featureTypeLineString="LineString",r["default"].prototype.$featureTypePolygon="Polygon",r["default"].prototype.featureTypePoint="Point",r["default"].prototype.$iconsImgUrl="https://icons.uzgps.uz/pins/"},vuetify:be,render:function(e){return e(ee)}}).$mount("#app"),r["default"].config.productionTip=!1},b444:function(e,t,n){"use strict";t["a"]={logout:"You are sign-out",auth_success:"Sign-in successfully","auth/user-not-found":"User not found","auth/wrong-password":"Wrong password","auth/email-already-in-use":"Email already in use"}}});
//# sourceMappingURL=app.b1470090.js.map